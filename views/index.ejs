<%- include('layout', { title: 'Home', body: `
<div class="max-w-6xl mx-auto">

  <!-- Welcome -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold">${currentUser ? currentUser.username : "Guest"}, welcome ðŸ‘‹</h1>
    <p class="muted mt-1">Discover trending threads, recent posts and your activity.</p>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="card p-6 rounded shadow">
      <h4 class="text-sm muted">Total Categories</h4>
      <div class="text-3xl font-bold mt-2">${(stats && stats.categories) ? stats.categories : 0}</div>
      <a href="/categories" class="text-sm mt-2 inline-block text-accent-2">View Categories â†’</a>
    </div>

    <div class="card p-6 rounded shadow">
      <h4 class="text-sm muted">Total Threads</h4>
      <div class="text-3xl font-bold mt-2">${(stats && stats.threads) ? stats.threads : 0}</div>
      <a href="/threads" class="text-sm mt-2 inline-block text-accent-2">View Threads â†’</a>
    </div>

    <div class="card p-6 rounded shadow">
      <h4 class="text-sm muted">Your Activity</h4>
      <div class="text-2xl font-bold mt-2">${(stats && stats.yourThreads) ? stats.yourThreads : 0} threads</div>
      <div class="muted text-sm">${(stats && stats.yourComments) ? stats.yourComments : 0} comments</div>
      <a href="/profile" class="text-sm mt-2 inline-block text-accent-2">View Profile â†’</a>
    </div>
  </div>

  <!-- Trending & Recent -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <section class="card p-6 rounded shadow">
      <h3 class="font-semibold mb-3">ðŸ”¥ Trending Threads</h3>
      ${
        (trending && trending.length > 0)
          ? trending.map(t => `
            <div class="p-3 border-b border-white/5">
              <a href="/threads/${t._id}" class="font-semibold text-accent-1">${t.title}</a>
              <div class="muted text-xs mt-1">Votes: ${t.votes || 0} â€¢ ${new Date(t.createdAt).toLocaleString()}</div>
            </div>
          `).join('')
          : `<p class="muted">No trending threads yet.</p>`
      }
    </section>

    <section class="card p-6 rounded shadow">
      <h3 class="font-semibold mb-3">ðŸ†• Recent Threads</h3>
      ${
        (recent && recent.length > 0)
          ? recent.map(t => `
            <div class="p-3 border-b border-white/5">
              <a href="/threads/${t._id}" class="font-semibold text-accent-2">${t.title}</a>
              <div class="muted text-xs mt-1">by ${t.author?.username || 'Anonymous'} â€¢ ${new Date(t.createdAt).toLocaleString()}</div>
            </div>
          `).join('')
          : `<p class="muted">No recent threads yet.</p>`
      }
    </section>
  </div>

</div>
` }) %>
